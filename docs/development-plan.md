## 🚀 맛의 아카이브 (Flavor Archive) 개발 상세 계획서

PRD와 Design 문서를 기반으로 한 MVP 개발 로드맵입니다.

---

## 📋 목차

1. [프로젝트 초기 설정](#1-프로젝트-초기-설정)
2. [데이터베이스 설계 및 구축](#2-데이터베이스-설계-및-구축)
3. [인증 시스템 구축](#3-인증-시스템-구축)
4. [UI 컴포넌트 라이브러리 구축](#4-ui-컴포넌트-라이브러리-구축)
5. [레거시 아카이브 기능 (Section A)](#5-레거시-아카이브-기능-section-a)
6. [현대 레시피 북 기능 (Section B)](#6-현대-레시피-북-기능-section-b)
7. [AI 맞춤 식단 큐레이션 (Section C)](#7-ai-맞춤-식단-큐레이션-section-c)
8. [통합 검색 기능](#8-통합-검색-기능)
9. [식자재 구매 연동 (C-5)](#9-식자재-구매-연동-c-5)
10. [성능 최적화 및 배포](#10-성능-최적화-및-배포)

---

## 1. 프로젝트 초기 설정

### 1.1. 기술 스택 확인 및 설치

**목표**: 개발 환경 구축 및 필수 도구 설치

| 작업 | 설명 | 예상 시간 |
| :--- | :--- | :--- |
| Next.js 프로젝트 확인/초기화 | Next.js 14+ App Router 사용 확인 | 30분 |
| Supabase 클라이언트 설정 | Supabase 프로젝트 연결 및 클라이언트 초기화 | 1시간 |
| 환경 변수 설정 | .env.local 파일 생성 및 필수 키 입력 | 30분 |
| 의존성 패키지 설치 | 필요한 npm 패키지 설치 | 1시간 |
| TypeScript 설정 확인 | 타입 안정성 확보 | 30분 |
| ESLint/Prettier 설정 | 코드 품질 관리 도구 설정 | 30분 |

**필수 패키지**:
- `next` (14+)
- `react` (18+)
- `@supabase/supabase-js` (Supabase 클라이언트)
- `@supabase/ssr` (서버 사이드 렌더링)
- `tailwindcss` (스타일링)
- `typescript`
- `zod` (데이터 검증)
- `react-hook-form` (폼 관리)

**선택적 패키지** (기능별):
- `framer-motion` (애니메이션)
- `react-player` (비디오 플레이어)
- `date-fns` (날짜 처리)
- `react-hot-toast` (알림)

---

## 2. 데이터베이스 설계 및 구축

### 2.1. 데이터베이스 스키마 설계

**목표**: Supabase PostgreSQL 데이터베이스 스키마 설계 및 마이그레이션 작성

#### 2.1.1. 사용자 및 인증 테이블

```sql
-- profiles: 사용자 프로필 정보 (Supabase Auth와 연동)
-- health_profiles: 건강 정보 (암호화 필수)
-- subscriptions: 구독 정보 (프리미엄 구독 관리)
```

#### 2.1.2. 레거시 아카이브 테이블 (Section A)

```sql
-- legacy_archives: 레거시 아카이브 메인 테이블
-- legacy_videos: 명인 인터뷰 영상 정보
-- legacy_documents: 전문 문서화 기록
-- legacy_categories: 분류 정보 (지역별, 시대별, 재료별)
-- legacy_substitutions: 대체 재료/도구 정보
```

#### 2.1.3. 현대 레시피 북 테이블 (Section B)

```sql
-- recipes: 레시피 메인 테이블
-- recipe_steps: 단계별 레시피 카드
-- recipe_ingredients: 재료 정보
-- recipe_ratings: 별점 평가 (1~5점)
-- recipe_comments: 댓글
-- recipe_images: 레시피 이미지
-- recipe_tags: 태그 (난이도, 조리시간 등)
```

#### 2.1.4. AI 식단 큐레이션 테이블 (Section C)

```sql
-- meal_plans: 식단 계획 (일일/주간)
-- meal_plan_recipes: 식단에 포함된 레시피
-- nutrition_data: 영양소 정보 (칼로리, 3대 영양소)
-- ingredient_marketplace: 식자재 마켓플레이스 연동 정보
```

#### 2.1.5. 공통 테이블

```sql
-- media_files: 미디어 파일 메타데이터 (이미지, 비디오)
-- search_history: 검색 기록
-- user_favorites: 사용자 즐겨찾기
```

### 2.2. 마이그레이션 작성 순서

1. **기본 테이블 생성** (profiles, media_files)
2. **레거시 아카이브 테이블** (legacy_archives, legacy_videos, legacy_documents)
3. **레시피 북 테이블** (recipes, recipe_steps, recipe_ingredients)
4. **평가 및 커뮤니티 테이블** (recipe_ratings, recipe_comments)
5. **AI 식단 테이블** (health_profiles, meal_plans, nutrition_data)
6. **인덱스 및 관계 설정**
7. **RLS (Row Level Security) 정책 설정**

**예상 시간**: 2-3일

---

## 3. 인증 시스템 구축

### 3.1. Supabase Auth 설정

**목표**: 사용자 회원가입, 로그인, 로그아웃 기능 구현

| 작업 | 설명 | 기능 ID |
| :--- | :--- | :--- |
| 이메일/비밀번호 인증 | 기본 회원가입 및 로그인 | - |
| 소셜 로그인 (선택) | Google, Kakao 로그인 | - |
| 프로필 생성 | 회원가입 시 profiles 테이블에 자동 생성 | - |
| 세션 관리 | 서버/클라이언트 세션 관리 | - |
| 비밀번호 재설정 | 이메일 기반 비밀번호 재설정 | - |

**예상 시간**: 2일

---

## 4. UI 컴포넌트 라이브러리 구축

### 4.1. 기본 컴포넌트

**목표**: 재사용 가능한 UI 컴포넌트 구축

| 컴포넌트 | 설명 | 사용 위치 |
| :--- | :--- | :--- |
| Button | 버튼 컴포넌트 (다양한 variant) | 전역 |
| Input | 입력 필드 | 폼 전반 |
| Card | 카드 컨테이너 | 레시피, 아카이브 카드 |
| Modal | 모달 다이얼로그 | 로그인, 상세 정보 |
| Header | 헤더 네비게이션 | 모든 페이지 |
| Footer | 푸터 | 모든 페이지 |
| SearchBar | 검색창 | 히어로 섹션, 상단 |
| Rating | 별점 표시/입력 | 레시피 평가 |
| Image | 최적화된 이미지 컴포넌트 | 전역 |

### 4.2. 레이아웃 컴포넌트

| 컴포넌트 | 설명 |
| :--- | :--- |
| Container | 페이지 컨테이너 (최대 너비 제한) |
| Section | 섹션 래퍼 (여백, 배경색 등) |
| Grid | 반응형 그리드 레이아웃 |

**예상 시간**: 3-4일

---

## 5. 레거시 아카이브 기능 (Section A)

### 5.1. MVP 기능 구현 순서

#### Phase 1: 기본 뷰어 (A-1, A-2)

| 작업 | 설명 | 기능 ID | 예상 시간 |
| :--- | :--- | :--- | :--- |
| 레거시 아카이브 목록 페이지 | 카드 그리드로 아카이브 목록 표시 | A-1 | 2일 |
| 영상 뷰어 페이지 | 비디오 플레이어 및 메타데이터 표시 | A-1 | 2일 |
| 문서화 기록 페이지 | 전문 문서화된 레시피 표시 | A-2 | 2일 |
| 미디어 업로드 기능 | 관리자용 영상/이미지 업로드 | - | 1일 |

#### Phase 2: 검색 및 분류 (A-3)

| 작업 | 설명 | 기능 ID | 예상 시간 |
| :--- | :--- | :--- | :--- |
| 분류 필터 UI | 지역별, 시대별, 재료별 필터 | A-3 | 1일 |
| 검색 기능 | 키워드 기반 검색 | A-3 | 1일 |
| 정렬 기능 | 최신순, 인기순 정렬 | A-3 | 1일 |

#### Phase 3: 대체재료 안내 (A-4) - Post-MVP

| 작업 | 설명 | 기능 ID | 예상 시간 |
| :--- | :--- | :--- | :--- |
| 대체재료 표시 | 전통 재료 옆에 현대 대체재료 표시 | A-4 | 2일 |

**총 예상 시간**: 8-9일 (MVP: 6일)

---

## 6. 현대 레시피 북 기능 (Section B)

### 6.1. MVP 기능 구현 순서

#### Phase 1: 레시피 표시 (B-1)

| 작업 | 설명 | 기능 ID | 예상 시간 |
| :--- | :--- | :--- | :--- |
| 레시피 목록 페이지 | 카드 그리드로 레시피 목록 표시 | B-1 | 2일 |
| 레시피 상세 페이지 | 단계별 카드 형식 레시피 표시 | B-1 | 3일 |
| 요리 시작 모드 | 타이머, 재료 체크리스트 기능 | B-1 | 2일 |
| 레시피 이미지 최적화 | 이미지 로딩 및 표시 최적화 | B-1 | 1일 |

#### Phase 2: UGC 업로드 (B-2)

| 작업 | 설명 | 기능 ID | 예상 시간 |
| :--- | :--- | :--- | :--- |
| 레시피 업로드 폼 | 재료, 단계, 이미지 업로드 | B-2 | 3일 |
| 이미지 업로드 처리 | Supabase Storage 연동 | B-2 | 1일 |
| 폼 검증 | 필수 필드 검증 (재료, 난이도, 조리시간) | B-2 | 1일 |

#### Phase 3: 커뮤니티 및 평가 (B-3)

| 작업 | 설명 | 기능 ID | 예상 시간 |
| :--- | :--- | :--- | :--- |
| 별점 평가 기능 | 1~5점 평가 입력 및 표시 | B-3 | 2일 |
| 댓글 기능 | 댓글 작성, 수정, 삭제 | B-3 | 2일 |
| 신고 기능 | 불량/저작권 침해 신고 | B-3 | 1일 |

**총 예상 시간**: 15-17일

---

## 7. AI 맞춤 식단 큐레이션 (Section C)

### 7.1. MVP 기능 구현 순서

#### Phase 1: 건강 정보 입력 (C-1)

| 작업 | 설명 | 기능 ID | 예상 시간 |
| :--- | :--- | :--- | :--- |
| 건강 정보 입력 폼 | 알레르기, 질병 정보, 선호도 입력 | C-1 | 2일 |
| 데이터 암호화 | 건강 정보 암호화 저장 | C-1 | 1일 |
| 건강 정보 수정 기능 | 기존 정보 수정 | C-1 | 1일 |

#### Phase 2: AI 식단 추천 (C-2)

| 작업 | 설명 | 기능 ID | 예상 시간 |
| :--- | :--- | :--- | :--- |
| 기본 추천 알고리즘 | 칼로리/3대 영양소 기반 추천 | C-2 | 3일 |
| 일일 식단 생성 | 아침/점심/저녁 식단 자동 생성 | C-2 | 2일 |
| 식단 표시 UI | 식단 카드 및 영양 정보 표시 | C-2 | 2일 |
| 영양소 계산 로직 | 레시피별 영양소 합산 | C-2 | 2일 |

#### Phase 3: 식자재 구매 연동 (C-5)

| 작업 | 설명 | 기능 ID | 예상 시간 |
| :--- | :--- | :--- | :--- |
| 식자재 목록 추출 | 추천 식단의 재료 목록 생성 | C-5 | 1일 |
| 마켓플레이스 연동 | 외부 식자재 판매 사이트 연동 | C-5 | 3일 |
| 원클릭 구매 기능 | 재료 목록을 한 번에 구매 페이지로 전달 | C-5 | 2일 |

**총 예상 시간**: 17-19일

---

## 8. 통합 검색 기능

### 8.1. 검색 기능 구현

| 작업 | 설명 | 예상 시간 |
| :--- | :--- | :--- |
| 통합 검색 API | 레거시 아카이브 + 레시피 북 통합 검색 | 2일 |
| 검색 결과 페이지 | 검색 결과 분류 표시 (아카이브/레시피) | 2일 |
| 검색 최적화 | 인덱싱 및 검색 성능 최적화 (3초 이내) | 1일 |
| 검색 기록 저장 | 사용자 검색 기록 저장 (선택적) | 1일 |

**총 예상 시간**: 4-6일

---

## 9. 홈페이지 구현

### 9.1. 페이지 구성

| 페이지/섹션 | 설명 | 예상 시간 |
| :--- | :--- | :--- |
| 홈페이지 레이아웃 | 헤더, 푸터, 기본 레이아웃 | 1일 |
| 히어로 섹션 | 메인 비주얼 및 검색창 | 1일 |
| 레거시 아카이브 섹션 | 홈페이지 프리뷰 섹션 | 1일 |
| 레시피 북 섹션 | 홈페이지 프리뷰 섹션 | 1일 |
| AI 식단 섹션 | 홈페이지 프리뷰 섹션 | 1일 |
| 반응형 디자인 | 모바일 최적화 | 2일 |

**총 예상 시간**: 6-7일

---

## 10. 성능 최적화 및 배포

### 10.1. 최적화 작업

| 작업 | 설명 | 예상 시간 |
| :--- | :--- | :--- |
| 이미지 최적화 | Next.js Image 컴포넌트 활용 | 1일 |
| 코드 스플리팅 | 동적 임포트로 번들 크기 최적화 | 1일 |
| 캐싱 전략 | API 응답 캐싱 및 재검증 | 1일 |
| CDN 설정 | 정적 자산 CDN 배포 | 1일 |
| 성능 모니터링 | Core Web Vitals 측정 도구 설정 | 1일 |

### 10.2. 배포 준비

| 작업 | 설명 | 예상 시간 |
| :--- | :--- | :--- |
| 환경 변수 설정 | 프로덕션 환경 변수 설정 | 0.5일 |
| 빌드 테스트 | 프로덕션 빌드 및 테스트 | 0.5일 |
| 배포 자동화 | CI/CD 파이프라인 설정 | 1일 |
| 에러 모니터링 | Sentry 등 에러 추적 도구 설정 | 1일 |

**총 예상 시간**: 5-6일

---

## 📊 전체 일정 요약

| 단계 | 작업 | 예상 시간 |
| :--- | :--- | :--- |
| **1단계** | 프로젝트 초기 설정 | 4-5일 |
| **2단계** | 데이터베이스 설계 및 구축 | 2-3일 |
| **3단계** | 인증 시스템 구축 | 2일 |
| **4단계** | UI 컴포넌트 라이브러리 | 3-4일 |
| **5단계** | 레거시 아카이브 (MVP) | 6일 |
| **6단계** | 현대 레시피 북 (MVP) | 15-17일 |
| **7단계** | AI 맞춤 식단 (MVP) | 17-19일 |
| **8단계** | 통합 검색 기능 | 4-6일 |
| **9단계** | 홈페이지 구현 | 6-7일 |
| **10단계** | 성능 최적화 및 배포 | 5-6일 |
| **총계** | **MVP 완성** | **64-77일 (약 9-11주)** |

---

## 🎯 우선순위별 개발 순서 (권장)

### Phase 1: 기반 구축 (2주)
1. 프로젝트 초기 설정
2. 데이터베이스 설계 및 구축
3. 인증 시스템 구축
4. UI 컴포넌트 라이브러리 (기본 컴포넌트)

### Phase 2: 핵심 기능 (4주)
1. 홈페이지 구현 (기본 레이아웃)
2. 현대 레시피 북 (B-1, B-3) - 가장 중요한 기능
3. 레거시 아카이브 (A-1, A-2, A-3)
4. 통합 검색 기능

### Phase 3: 고급 기능 (3주)
1. 레시피 업로드 (B-2)
2. AI 맞춤 식단 (C-1, C-2)
3. 식자재 구매 연동 (C-5)

### Phase 4: 최적화 및 배포 (1주)
1. 성능 최적화
2. 배포 준비 및 배포

---

## 📝 참고사항

- **병렬 작업 가능**: UI 컴포넌트와 데이터베이스 설계는 병렬로 진행 가능
- **점진적 배포**: 각 Phase 완료 시마다 스테이징 환경에 배포하여 테스트
- **사용자 테스트**: Phase 2 완료 후 베타 테스터 모집 및 피드백 수집
- **문서화**: 각 기능 구현 시 API 문서 및 사용자 가이드 작성

---

**작성일**: 2025년 1월  
**버전**: V1.0  
**참고 문서**: [PRD.md](./PRD.md), [design.md](./design.md)

