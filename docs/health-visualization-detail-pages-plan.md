# 건강 시각화 상세보기 페이지 구현 계획

## 📋 개요

건강 시각화 대시보드의 3개 섹션에 대한 상세보기 페이지를 구현합니다.

## 🎯 목표

1. 사용자가 건강 상태를 더 자세히 파악할 수 있도록 상세 정보 제공
2. 영양 균형을 시각적으로 이해하기 쉽게 표현
3. 식단 효과 예측을 통해 개선 방향 제시

---

## 📄 페이지 구조

### 1. 현재 건강 상태 상세보기
**경로**: `/health/visualization/status`

#### 표시할 내용

**1.1 건강 점수 상세 분석**
- 전체 건강 점수 (91.2점) - 큰 숫자로 강조
- 건강 등급 (최상 ⭐⭐⭐⭐⭐) - 배지와 별점 표시
- 점수 구성 요소별 기여도
  - BMI 기여도: 20점
  - 체지방률 기여도: 15점
  - 영양 균형 기여도: 25점
  - 질병 위험도 기여도: 20점
  - 활동량 기여도: 11.2점

**1.2 신체 지표 상세**
- **BMI (22.0)**
  - BMI 범위 표시 (저체중/정상/과체중/비만)
  - 현재 위치 표시 (게이지 차트)
  - 건강한 BMI 범위 안내
  - BMI 개선 권장사항 (필요시)
  
- **체지방률 (20.0%)**
  - 성별/연령대별 평균과 비교
  - 체지방률 범위 표시 (게이지 차트)
  - 건강한 체지방률 범위 안내
  - 체지방률 개선 방법 제시

- **근육량** (추정값)
  - 체중 대비 근육량 비율
  - 성별/연령대별 평균과 비교
  - 근육량 증가 권장사항

- **기초대사율 (BMR)**
  - 일일 칼로리 소모량
  - 활동량을 고려한 총 소모량 (TDEE)
  - 칼로리 목표와 비교

**1.3 질병 위험도 분석**
- 심혈관 질환 위험도
- 당뇨 위험도
- 신장 질환 위험도
- 비만 위험도
- 고혈압 위험도
- 각 위험도별 게이지 차트
- 위험도 감소 방법 제시

**1.4 일일 활동량**
- 걸음 수
- 활동 시간
- 소모 칼로리
- 운동 강도
- 목표 대비 달성률

**1.5 건강 트렌드 (최근 7일/30일)**
- 건강 점수 변화 그래프
- BMI 변화 추이
- 체지방률 변화 추이
- 활동량 변화 추이

**1.6 개선 권장사항**
- 우선순위별 개선 항목
- 실행 가능한 액션 아이템
- 건강 목표 설정 링크

---

### 2. 영양 균형 상세보기
**경로**: `/health/visualization/nutrition`

#### 표시할 내용

**2.1 3대 영양소 비율**
- **도넛 차트**: 탄수화물/단백질/지방 비율 시각화
- 각 영양소별:
  - 현재 섭취량 (g)
  - 칼로리 기여도 (kcal)
  - 권장 비율 (%)
  - 현재 비율 (%)
  - 상태 (적정/부족/과다)

**2.2 영양소별 상세 분석**

**탄수화물 (250g / 250%)**
- 일일 권장량 대비 섭취량
- 탄수화물 종류 분석 (복합탄수화물 vs 단순당)
- 혈당 관리 관점에서의 평가
- 개선 권장사항

**단백질 (80g / 80%)**
- 일일 권장량 대비 섭취량
- 단백질 품질 평가 (완전단백질 비율)
- 근육 합성 관점에서의 평가
- 개선 권장사항

**지방 (70g / 70%)**
- 일일 권장량 대비 섭취량
- 지방 종류 분석 (포화지방/불포화지방/트랜스지방)
- 심혈관 건강 관점에서의 평가
- 개선 권장사항

**2.3 미세 영양소 (비타민 & 미네랄)**
- **비타민 레벨**
  - 비타민 A, B, C, D, E
  - 각 비타민별 권장량 대비 섭취율
  - 부족한 비타민 강조
  - 비타민 보충 방법 제시

- **미네랄 레벨**
  - 칼슘, 철, 마그네슘, 칼륨, 아연
  - 각 미네랄별 권장량 대비 섭취율
  - 부족한 미네랄 강조
  - 미네랄 보충 방법 제시

**2.4 기타 영양 지표**
- **섬유질 (Fiber)**
  - 일일 권장량 대비 섭취량
  - 소화 건강 관점 평가

- **당분 (Sugar)**
  - 일일 권장량 대비 섭취량
  - WHO 권장량과 비교
  - 당분 감소 권장사항

- **나트륨 (Sodium)**
  - 일일 권장량 대비 섭취량
  - 고혈압 예방 관점 평가
  - 나트륨 감소 권장사항

- **콜레스테롤**
  - 일일 권장량 대비 섭취량
  - 심혈관 건강 관점 평가

**2.5 영양 균형 점수**
- 전체 영양 균형 점수 (0-100)
- 영양소별 기여도
- 개선 우선순위

**2.6 영양 트렌드 (최근 7일/30일)**
- 3대 영양소 섭취 추이 그래프
- 미세 영양소 섭취 추이
- 목표 대비 달성률 변화

**2.7 맞춤형 영양 권장사항**
- 부족한 영양소 보충 방법
- 과다 섭취 영양소 조절 방법
- 건강 목표에 맞는 영양소 조정

---

### 3. 식단 효과 예측 상세보기
**경로**: `/health/visualization/impact`

#### 표시할 내용

**3.1 목표 달성률 종합**
- 전체 목표 달성률 (75%)
- 목표 달성률 링 차트
- 목표 달성률 구성 요소:
  - 칼로리 목표 달성률
  - 3대 영양소 목표 달성률
  - 미세 영양소 목표 달성률
  - 활동량 목표 달성률

**3.2 칼로리 목표 분석**
- 현재 섭취 칼로리
- 목표 칼로리
- 소모 칼로리 (BMR + 활동량)
- 칼로리 균형 (섭취 - 소모)
- 목표 달성률
- 개선 방향 제시

**3.3 3대 영양소 목표 달성률**

**탄수화물**
- 현재 섭취량 vs 목표량
- 목표 달성률
- 부족/과다 여부
- 개선 권장사항

**단백질**
- 현재 섭취량 vs 목표량
- 목표 달성률
- 부족/과다 여부
- 개선 권장사항 (우선순위 높음)

**지방**
- 현재 섭취량 vs 목표량
- 목표 달성률
- 부족/과다 여부
- 개선 권장사항

**3.4 주요 개선 포인트**
- **단백질 섭취 증가 권장** (우선순위 높음)
  - 현재 상태 분석
  - 목표까지 필요한 양
  - 단백질 풍부한 식품 추천
  - 식단 개선 방법

- **운동 시간 확대 필요**
  - 현재 활동량
  - 목표 활동량
  - 활동량 증가 방법

- 기타 개선 포인트들

**3.5 식단 효과 시뮬레이션**
- 현재 식단 유지 시 예상 건강 점수
- 개선된 식단 적용 시 예상 건강 점수
- 개선 효과 비교 차트
- 예상 개선 기간

**3.6 건강 목표별 달성률**
- 체중 관리 목표 달성률
- 근육량 증가 목표 달성률
- 심혈관 건강 목표 달성률
- 당뇨 관리 목표 달성률
- 신장 건강 목표 달성률

**3.7 일일/주간/월간 트렌드**
- 목표 달성률 변화 그래프
- 영양소 섭취 추이
- 건강 점수 변화 추이
- 개선 속도 분석

**3.8 실행 가능한 액션 플랜**
- 오늘 할 수 있는 개선 사항
- 이번 주 목표
- 이번 달 목표
- 장기 목표

**3.9 맞춤형 추천**
- 부족한 영양소 보충 레시피 추천
- 목표 달성을 위한 식단 조정 방법
- 운동 추천 (활동량 부족 시)

---

## 🎨 UI/UX 설계

### 공통 디자인 요소
- **색상 테마**: 건강 상태에 따른 색상 (녹색=좋음, 노랑=보통, 주황=주의, 빨강=위험)
- **차트 라이브러리**: Recharts 사용 (도넛 차트, 막대 차트, 라인 차트)
- **반응형 디자인**: 모바일/태블릿/데스크톱 지원
- **로딩 상태**: 스켈레톤 UI
- **에러 처리**: 친화적인 에러 메시지

### 레이아웃 구조
```
[헤더]
  - 페이지 제목
  - 뒤로가기 버튼
  - 새로고침 버튼

[메인 콘텐츠]
  - 요약 카드 (상단)
  - 상세 분석 섹션들 (스크롤 가능)
  - 차트 및 시각화
  - 권장사항 카드

[푸터]
  - 관련 페이지 링크
  - 건강 정보 관리 링크
```

---

## 🔧 기술 구현

### 파일 구조
```
app/health/visualization/
  ├── status/
  │   └── page.tsx          # 현재 건강 상태 상세보기
  ├── nutrition/
  │   └── page.tsx          # 영양 균형 상세보기
  └── impact/
      └── page.tsx          # 식단 효과 예측 상세보기

components/health/visualization/detail/
  ├── health-status-detail.tsx
  ├── nutrition-balance-detail.tsx
  └── diet-impact-detail.tsx
```

### API 엔드포인트
- `/api/health/metrics` - 건강 메트릭스 조회 (이미 존재)
- `/api/health/nutrition/trend` - 영양 트렌드 조회 (신규 필요)
- `/api/health/goal-progress` - 목표 달성률 조회 (신규 필요)

### 데이터 흐름
1. 페이지 로드 시 `/api/health/metrics` 호출
2. 건강 메트릭스 데이터 수신
3. 각 페이지에 맞게 데이터 가공
4. 차트 및 시각화 컴포넌트 렌더링
5. 권장사항 생성 및 표시

---

## ✅ 구현 우선순위

### Phase 1: 기본 구조 및 1번 페이지
1. 라우트 구조 생성
2. 현재 건강 상태 상세보기 페이지 구현
3. 상세보기 버튼 링크 수정

### Phase 2: 2번 페이지
1. 영양 균형 상세보기 페이지 구현
2. 영양 트렌드 API 구현 (필요시)

### Phase 3: 3번 페이지
1. 식단 효과 예측 상세보기 페이지 구현
2. 목표 달성률 계산 로직 구현

### Phase 4: 개선 및 최적화
1. 차트 애니메이션 추가
2. 모바일 반응형 최적화
3. 성능 최적화
4. 접근성 개선

---

## 📝 참고사항

- 모든 데이터는 사용자의 건강 프로필과 최근 식단 데이터를 기반으로 계산
- 데이터가 없는 경우 기본값 또는 안내 메시지 표시
- 건강 정보가 없는 경우 건강 정보 입력 페이지로 안내
- 프리미엄 기능은 별도 표시

