# ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ vs UI/UX ìš”êµ¬ì‚¬í•­ ë¹„êµ ë¶„ì„ ë¦¬í¬íŠ¸

> **ìž‘ì„±ì¼**: 2025ë…„ 1ì›” 1ì¼  
> **ë¶„ì„ ëŒ€ìƒ**: ìƒì„±ëœ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ vs PRD/UI/UX ìš”êµ¬ì‚¬í•­ vs ì‹¤ì œ ì½”ë“œ êµ¬í˜„

---

## ðŸ“Š ë¶„ì„ ê°œìš”

### ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ í˜„í™©
- **ì´ í…Œì´ë¸” ìˆ˜**: 47ê°œ
- **ì¸ë±ìŠ¤ ìˆ˜**: 70ê°œ
- **ì œì•½ì¡°ê±´**: CASCADE 30ê°œ, UNIQUE 20ê°œ, CHECK 30ê°œ
- **íŠ¸ë¦¬ê±°**: updated_at ìžë™ ì—…ë°ì´íŠ¸ 24ê°œ, ê°€ì¡± êµ¬ì„±ì› ì œí•œ 1ê°œ
- **RLS ìƒíƒœ**: ëª¨ë“  í…Œì´ë¸” ë¹„í™œì„±í™” (MVP ê°œë°œ í™˜ê²½)

### ì‹¤ì œ ì½”ë“œì—ì„œ ì‚¬ìš©ë˜ëŠ” í…Œì´ë¸”
ì½”ë“œë² ì´ìŠ¤ ë¶„ì„ ê²°ê³¼, ë‹¤ìŒ í…Œì´ë¸”ë“¤ì´ ì‹¤ì œë¡œ ì‚¬ìš©ë˜ê³  ìžˆìŠµë‹ˆë‹¤:
- `users`, `user_health_profiles`, `family_members`
- `recipes`, `recipe_ingredients`, `recipe_steps`, `recipe_ratings`
- `diet_plans`, `weekly_diet_plans`, `weekly_shopping_lists`, `weekly_nutrition_stats`
- `diseases`, `allergies`, `allergy_derived_ingredients`
- `kcdc_alerts`, `diet_notification_settings`
- `user_subscriptions`, `admin_copy_blocks`, `popup_announcements`
- `favorite_meals`, `meal_kits`, `meal_kit_products`
- `legacy_videos`, `legacy_documents`, `legacy_masters`
- `foodsafety_recipes_cache`

---

## âœ… ì™„ë²½í•˜ê²Œ ì¼ì¹˜í•˜ëŠ” ë¶€ë¶„

### 1. í•µì‹¬ ì‚¬ìš©ìž ê¸°ëŠ¥
| ê¸°ëŠ¥ | í…Œì´ë¸” | ìƒíƒœ | ë¹„ê³  |
|------|--------|------|------|
| ì‚¬ìš©ìž ì¸ì¦ | `users` | âœ… ì™„ë²½ | Clerk ID ì—°ë™, í”„ë¦¬ë¯¸ì—„ êµ¬ë… í•„ë“œ í¬í•¨ |
| ê±´ê°• í”„ë¡œí•„ | `user_health_profiles` | âœ… ì™„ë²½ | ì§ˆë³‘/ì•Œë ˆë¥´ê¸° ë°°ì—´, ì¹¼ë¡œë¦¬ ëª©í‘œ ë“± ëª¨ë“  í•„ë“œ í¬í•¨ |
| ê°€ì¡± êµ¬ì„±ì› | `family_members` | âœ… ì™„ë²½ | í†µí•© ì‹ë‹¨ í¬í•¨ ì—¬ë¶€(`include_in_unified_diet`) í¬í•¨ |

### 2. ë ˆì‹œí”¼ ì‹œìŠ¤í…œ
| ê¸°ëŠ¥ | í…Œì´ë¸” | ìƒíƒœ | ë¹„ê³  |
|------|--------|------|------|
| ë ˆì‹œí”¼ ê¸°ë³¸ ì •ë³´ | `recipes` | âœ… ì™„ë²½ | ì‹ì•½ì²˜ API í•„ë“œ ëª¨ë‘ í¬í•¨ |
| ë ˆì‹œí”¼ ìž¬ë£Œ | `recipe_ingredients` | âœ… ì™„ë²½ | ENUM ì¹´í…Œê³ ë¦¬, ì„ íƒ ìž¬ë£Œ ì—¬ë¶€ í¬í•¨ |
| ë ˆì‹œí”¼ ë‹¨ê³„ | `recipe_steps` | âœ… ì™„ë²½ | íƒ€ì´ë¨¸, ì´ë¯¸ì§€, ë¹„ë””ì˜¤ í•„ë“œ í¬í•¨ |
| ë ˆì‹œí”¼ í‰ê°€ | `recipe_ratings` | âœ… ì™„ë²½ | 0~5ì  ë²”ìœ„, UNIQUE ì œì•½ì¡°ê±´ í¬í•¨ |
| ë ˆì‹œí”¼ ì‹ ê³  | `recipe_reports` | âœ… ì™„ë²½ | ì‹ ê³  ìœ í˜•, ìƒíƒœ ê´€ë¦¬ í¬í•¨ |

### 3. ì‹ë‹¨ ê´€ë¦¬ ì‹œìŠ¤í…œ
| ê¸°ëŠ¥ | í…Œì´ë¸” | ìƒíƒœ | ë¹„ê³  |
|------|--------|------|------|
| ì¼ì¼ ì‹ë‹¨ | `diet_plans` | âœ… ì™„ë²½ | ê°€ì¡± êµ¬ì„±ì› ì—°ë™, ì˜ì–‘ì†Œ ì •ë³´ í¬í•¨ |
| ì£¼ê°„ ì‹ë‹¨ | `weekly_diet_plans` | âœ… ì™„ë²½ | ISO 8601 ì£¼ì°¨ ì •ë³´ í¬í•¨ |
| ìž¥ë³´ê¸° ë¦¬ìŠ¤íŠ¸ | `weekly_shopping_lists` | âœ… ì™„ë²½ | ìž¬ë£Œ í†µí•©, êµ¬ë§¤ ì™„ë£Œ ìƒíƒœ í¬í•¨ |
| ì˜ì–‘ í†µê³„ | `weekly_nutrition_stats` | âœ… ì™„ë²½ | ì¼ë³„ ì˜ì–‘ì†Œ í•©ê³„ í¬í•¨ |

### 4. ê±´ê°• ê´€ë¦¬ ì‹œìŠ¤í…œ
| ê¸°ëŠ¥ | í…Œì´ë¸” | ìƒíƒœ | ë¹„ê³  |
|------|--------|------|------|
| ì§ˆë³‘ ë§ˆìŠ¤í„° | `diseases` | âœ… ì™„ë²½ | ì¹¼ë¡œë¦¬ ì¡°ì • ê³„ìˆ˜ í¬í•¨ |
| ì•Œë ˆë¥´ê¸° ë§ˆìŠ¤í„° | `allergies` | âœ… ì™„ë²½ | ì‹¬ê°ë„ ë ˆë²¨ í¬í•¨ |
| ì•Œë ˆë¥´ê¸° íŒŒìƒ ìž¬ë£Œ | `allergy_derived_ingredients` | âœ… ì™„ë²½ | ì—„ê²©í•œ í•„í„°ë§ ì§€ì› |
| ì§ˆë³‘ë³„ ì œì™¸ ìŒì‹ | `disease_excluded_foods_extended` | âœ… ì™„ë²½ | ì‹¬ê°ë„, ì œì™¸ ìœ í˜• í¬í•¨ |
| ì‘ê¸‰ì¡°ì¹˜ ì •ë³´ | `emergency_procedures` | âœ… ì™„ë²½ | ë‹¨ê³„ë³„ ì•ˆë‚´, ìœ„í—˜ ì‹ í˜¸ í¬í•¨ |
| ì¹¼ë¡œë¦¬ ê³„ì‚° ê³µì‹ | `calorie_calculation_formulas` | âœ… ì™„ë²½ | ë‹¤ì¤‘ ê³µì‹ ì§€ì› êµ¬ì¡° |

### 5. ê´€ë¦¬ìž ê¸°ëŠ¥
| ê¸°ëŠ¥ | í…Œì´ë¸” | ìƒíƒœ | ë¹„ê³  |
|------|--------|------|------|
| íŽ˜ì´ì§€ ë¬¸êµ¬ ê´€ë¦¬ | `admin_copy_blocks` | âœ… ì™„ë²½ | ìŠ¬ë¡¯/ë¡œì¼€ì¼ ê¸°ë°˜ ê´€ë¦¬ |
| íŒì—… ê³µì§€ | `popup_announcements` | âœ… ì™„ë²½ | í™œì„±í™” ê¸°ê°„, ìš°ì„ ìˆœìœ„ í¬í•¨ |
| ì•Œë¦¼ ë¡œê·¸ | `notification_logs` | âœ… ì™„ë²½ | íƒ€ìž…ë³„ ë¡œê·¸ ê´€ë¦¬ |
| ë³´ì•ˆ ê°ì‚¬ | `admin_security_audit` | âœ… ì™„ë²½ | ì•¡ì…˜ë³„ ê°ì‚¬ ë¡œê·¸ |

---

## âš ï¸ ë°œê²¬ëœ ë¬¸ì œì  ë° ê°œì„  í•„ìš” ì‚¬í•­

### 1. **ë ˆì‹œí”¼ í‰ê°€ í†µê³„ ë·° ëˆ„ë½** (ì¤‘ìš”)

**ë¬¸ì œ:**
- `app/api/search/route.ts`ì—ì„œ `recipe_rating_stats` ë·°ë¥¼ ì°¸ì¡°í•˜ì§€ë§Œ ìŠ¤í‚¤ë§ˆì— ì—†ìŒ
- ì½”ë“œ: `rating_stats:recipe_rating_stats(rating_count, average_rating)`

**ì˜í–¥:**
- ê²€ìƒ‰ APIê°€ ìž‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ ìžˆìŒ
- ë ˆì‹œí”¼ ì¹´ë“œì— í‰ê·  í‰ì  í‘œì‹œ ë¶ˆê°€ëŠ¥

**í•´ê²° ë°©ì•ˆ:**
```sql
-- ë ˆì‹œí”¼ í‰ê°€ í†µê³„ ë·° ìƒì„±
CREATE OR REPLACE VIEW recipe_rating_stats AS
SELECT 
    recipe_id,
    COUNT(*) as rating_count,
    ROUND(AVG(rating), 2) as average_rating
FROM recipe_ratings
GROUP BY recipe_id;

-- ì¸ë±ìŠ¤ ì¶”ê°€ (ì„±ëŠ¥ ìµœì í™”)
CREATE INDEX IF NOT EXISTS idx_recipe_ratings_recipe_id ON recipe_ratings(recipe_id);
```

### 2. **ë ˆì‹œí”¼ ì¹´í…Œê³ ë¦¬/íƒœê·¸ ì‹œìŠ¤í…œ ë¶€ìž¬**

**ë¬¸ì œ:**
- PRDì—ëŠ” ë ˆì‹œí”¼ ì¹´í…Œê³ ë¦¬/íƒœê·¸ ê¸°ëŠ¥ì´ ì–¸ê¸‰ë˜ì–´ ìžˆì§€ë§Œ ë³„ë„ í…Œì´ë¸” ì—†ìŒ
- í˜„ìž¬ëŠ” `recipes` í…Œì´ë¸”ì— ì§ì ‘ í•„ë“œë¡œ ì €ìž¥í•˜ëŠ” êµ¬ì¡°

**ì˜í–¥:**
- ë ˆì‹œí”¼ ë¶„ë¥˜ ë° í•„í„°ë§ ê¸°ëŠ¥ ì œí•œì 
- ê²€ìƒ‰ ì„±ëŠ¥ ì €í•˜ ê°€ëŠ¥ì„±

**ê°œì„  ì œì•ˆ:**
```sql
-- ë ˆì‹œí”¼ ì¹´í…Œê³ ë¦¬ í…Œì´ë¸” (ì„ íƒì‚¬í•­)
CREATE TABLE recipe_categories (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name TEXT NOT NULL UNIQUE,
    slug TEXT NOT NULL UNIQUE,
    description TEXT,
    created_at TIMESTAMPTZ DEFAULT now()
);

-- ë ˆì‹œí”¼-ì¹´í…Œê³ ë¦¬ ë‹¤ëŒ€ë‹¤ ê´€ê³„
CREATE TABLE recipe_category_relations (
    recipe_id UUID REFERENCES recipes(id) ON DELETE CASCADE,
    category_id UUID REFERENCES recipe_categories(id) ON DELETE CASCADE,
    PRIMARY KEY (recipe_id, category_id)
);
```

### 3. **ê²€ìƒ‰ ê¸°ë¡ í…Œì´ë¸” ë¶€ìž¬**

**ë¬¸ì œ:**
- UI/UX ë¬¸ì„œì— ê²€ìƒ‰ ê¸°ë¡ ê¸°ëŠ¥ì´ ì–¸ê¸‰ë˜ì–´ ìžˆì§€ë§Œ í…Œì´ë¸” ì—†ìŒ
- ì‚¬ìš©ìž ê²€ìƒ‰ íŒ¨í„´ ë¶„ì„ ë¶ˆê°€ëŠ¥

**ê°œì„  ì œì•ˆ:**
```sql
CREATE TABLE search_history (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    query TEXT NOT NULL,
    result_count INTEGER,
    search_type TEXT CHECK (search_type IN ('recipe', 'legacy', 'all')),
    created_at TIMESTAMPTZ DEFAULT now()
);

CREATE INDEX idx_search_history_user_id ON search_history(user_id);
CREATE INDEX idx_search_history_created_at ON search_history(created_at);
```

### 4. **ë ˆì‹œí”¼ ëŒ“ê¸€ ê¸°ëŠ¥ ë¶€ìž¬**

**ë¬¸ì œ:**
- PRDì— "ëŒ“ê¸€ ê¸°ëŠ¥ì€ ë²”ìœ„ì—ì„œ ì œì™¸ë¨" ëª…ì‹œë˜ì–´ ìžˆìŒ
- í•˜ì§€ë§Œ í–¥í›„ í™•ìž¥ì„ ê³ ë ¤í•˜ë©´ í…Œì´ë¸” êµ¬ì¡°ëŠ” ì¤€ë¹„í•´ë‘ëŠ” ê²ƒì´ ì¢‹ìŒ

**í˜„ìž¬ ìƒíƒœ:** âœ… ì˜ë„ì ìœ¼ë¡œ ì œì™¸ë¨ (PRD ëª…ì‹œ)

### 5. **ë¯¸ë””ì–´ íŒŒì¼ ë©”íƒ€ë°ì´í„° í…Œì´ë¸” ë¶€ìž¬**

**ë¬¸ì œ:**
- ë ˆì‹œí”¼ ì´ë¯¸ì§€, ë¹„ë””ì˜¤ URLì€ ì €ìž¥ë˜ì§€ë§Œ ë©”íƒ€ë°ì´í„°(í¬ê¸°, í˜•ì‹, ì—…ë¡œë“œ ì‹œê°„ ë“±) ê´€ë¦¬ ë¶ˆê°€
- ì´ë¯¸ì§€ ìµœì í™” ë° ê´€ë¦¬ ê¸°ëŠ¥ ì œí•œì 

**ê°œì„  ì œì•ˆ:**
```sql
CREATE TABLE media_files (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    file_path TEXT NOT NULL UNIQUE,
    file_type TEXT CHECK (file_type IN ('image', 'video', 'document')),
    file_size_bytes BIGINT,
    mime_type TEXT,
    width INTEGER,
    height INTEGER,
    duration_seconds INTEGER, -- ë¹„ë””ì˜¤ìš©
    uploaded_by UUID REFERENCES users(id) ON DELETE SET NULL,
    storage_bucket TEXT,
    created_at TIMESTAMPTZ DEFAULT now()
);

CREATE INDEX idx_media_files_file_path ON media_files(file_path);
CREATE INDEX idx_media_files_uploaded_by ON media_files(uploaded_by);
```

### 6. **ë ˆì‹œí”¼ ì¦ê²¨ì°¾ê¸° vs ì‹ë‹¨ ì¦ê²¨ì°¾ê¸° í˜¼ë™ ê°€ëŠ¥ì„±**

**ë¬¸ì œ:**
- `favorite_meals` í…Œì´ë¸”ì´ ìžˆì§€ë§Œ, ë ˆì‹œí”¼ ìžì²´ë¥¼ ì¦ê²¨ì°¾ê¸°í•˜ëŠ” ê¸°ëŠ¥ì€ ë³„ë„ë¡œ í•„ìš”í•  ìˆ˜ ìžˆìŒ
- í˜„ìž¬ëŠ” ì‹ë‹¨(meal) ì¦ê²¨ì°¾ê¸°ë§Œ ì§€ì›

**í˜„ìž¬ ìƒíƒœ:** âœ… `favorite_meals`ë¡œ ì‹ë‹¨ ì¦ê²¨ì°¾ê¸° ì§€ì› (ì˜ë„ëœ ì„¤ê³„)

---

## ðŸ” ì½”ë“œì™€ ìŠ¤í‚¤ë§ˆ ë¶ˆì¼ì¹˜ ì‚¬í•­

### 1. **ê²€ìƒ‰ APIì˜ ë·° ì°¸ì¡°**

**íŒŒì¼:** `app/api/search/route.ts:53`
```typescript
rating_stats:recipe_rating_stats(rating_count, average_rating)
```

**ë¬¸ì œ:** `recipe_rating_stats` ë·°ê°€ ìŠ¤í‚¤ë§ˆì— ì—†ìŒ

**í•´ê²°:** ìœ„ì˜ ë·° ìƒì„± SQL ì¶”ê°€ í•„ìš”

### 2. **ê°€ì¡± êµ¬ì„±ì› ì¡°íšŒ ì‹œ ì»¬ëŸ¼ ëˆ„ë½ ê°€ëŠ¥ì„±**

**íŒŒì¼:** `app/api/family/members/route.ts:107`
```typescript
.select("id, user_id, name, birth_date, gender, relationship, diseases, allergies, height_cm, weight_kg, activity_level, dietary_preferences, created_at, updated_at")
```

**ë¬¸ì œ:** `include_in_unified_diet` ì»¬ëŸ¼ì´ SELECTì— ì—†ìŒ (ì£¼ì„ì— "ì—†ì„ ìˆ˜ ìžˆìœ¼ë¯€ë¡œ ì œì™¸" ëª…ì‹œ)

**í•´ê²°:** ìŠ¤í‚¤ë§ˆì—ëŠ” í¬í•¨ë˜ì–´ ìžˆìœ¼ë¯€ë¡œ SELECTì— ì¶”ê°€ ê°€ëŠ¥

### 3. **ë ˆì‹œí”¼ í‰ê°€ 0.5ì  ë‹¨ìœ„ vs 1ì  ë‹¨ìœ„**

**PRD ëª…ì‹œ:** "ë³„ì (0.5 ë‹¨ìœ„)"
**ìŠ¤í‚¤ë§ˆ:** `rating NUMERIC NOT NULL CHECK (rating >= 0 AND rating <= 5)`
**ì‹¤ì œ ì½”ë“œ:** `components/recipes/recipe-rating.tsx`ì—ì„œ 1ì  ë‹¨ìœ„ë¡œ êµ¬í˜„ë¨

**ë¬¸ì œ:** ìŠ¤í‚¤ë§ˆëŠ” 0.5ì  ë‹¨ìœ„ë¥¼ í—ˆìš©í•˜ì§€ë§Œ UIëŠ” 1ì  ë‹¨ìœ„ë§Œ ì§€ì›

**í•´ê²°:** 
- UIë¥¼ 0.5ì  ë‹¨ìœ„ë¡œ ìˆ˜ì •í•˜ê±°ë‚˜
- ìŠ¤í‚¤ë§ˆ CHECK ì œì•½ì¡°ê±´ì„ 1ì  ë‹¨ìœ„ë¡œ ì œí•œ

---

## ðŸ“ˆ ì„±ëŠ¥ ìµœì í™” ê²€í† 

### âœ… ìž˜ ì„¤ì •ëœ ì¸ë±ìŠ¤

1. **ì‚¬ìš©ìž ê´€ë ¨**
   - `idx_users_clerk_id`: Clerk ID ì¡°íšŒ ìµœì í™” âœ…
   - `idx_family_members_user_id`: ê°€ì¡± êµ¬ì„±ì› ì¡°íšŒ ìµœì í™” âœ…
   - `idx_family_members_birth_date`: ë‚˜ì´ ê³„ì‚° ìµœì í™” âœ…

2. **ë ˆì‹œí”¼ ê´€ë ¨**
   - `idx_recipes_slug`: URL ê¸°ë°˜ ì¡°íšŒ ìµœì í™” âœ…
   - `idx_recipes_title`: ì œëª© ê²€ìƒ‰ ìµœì í™” âœ…
   - `idx_recipes_created_at`: ìµœì‹  ë ˆì‹œí”¼ ì¡°íšŒ ìµœì í™” âœ…
   - `idx_recipe_ingredients_name`: ìž¬ë£Œëª… ê²€ìƒ‰ ìµœì í™” âœ…

3. **ì‹ë‹¨ ê´€ë ¨**
   - `idx_diet_plans_plan_date`: ë‚ ì§œë³„ ì‹ë‹¨ ì¡°íšŒ ìµœì í™” âœ…
   - `idx_weekly_diet_plans_week`: ì£¼ì°¨ë³„ ì¡°íšŒ ìµœì í™” âœ…

### âš ï¸ ì¶”ê°€ ì¸ë±ìŠ¤ ê³ ë ¤ì‚¬í•­

1. **ë³µí•© ì¸ë±ìŠ¤ ì¶”ê°€ ì œì•ˆ**
```sql
-- ë ˆì‹œí”¼ ê²€ìƒ‰ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX idx_recipes_title_description ON recipes USING gin(to_tsvector('korean', title || ' ' || COALESCE(description, '')));

-- ì‹ë‹¨ ë‚ ì§œ+ì‚¬ìš©ìž ë³µí•© ì¸ë±ìŠ¤
CREATE INDEX idx_diet_plans_user_date ON diet_plans(user_id, plan_date);
```

2. **ë¶€ë¶„ ì¸ë±ìŠ¤ ê³ ë ¤**
```sql
-- í™œì„± êµ¬ë…ìžë§Œ ì¸ë±ì‹±
CREATE INDEX idx_subscriptions_active ON subscriptions(user_id) WHERE status = 'active';

-- ë°œí–‰ëœ ë ˆì‹œí”¼ë§Œ ì¸ë±ì‹±
CREATE INDEX idx_royal_recipes_posts_published_only ON royal_recipes_posts(slug) WHERE published = true;
```

---

## ðŸŽ¨ UI/UX ìš”êµ¬ì‚¬í•­ ëŒ€ë¹„ ë°ì´í„°ë² ì´ìŠ¤ ì§€ì›ë„

### âœ… ì™„ë²½í•˜ê²Œ ì§€ì›ë˜ëŠ” ê¸°ëŠ¥

1. **í™ˆíŽ˜ì´ì§€ UI/UX (E-1 ~ E-6)**
   - ìƒë‹¨ ê³ ì • í—¤ë”: `users.is_premium` ì§€ì› âœ…
   - ë°”ë¡œê°€ê¸° ë©”ë‰´: ëª¨ë“  ê´€ë ¨ í…Œì´ë¸” ì¡´ìž¬ âœ…
   - í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜: ì‚¬ìš©ìž ì¸ì¦ ì§€ì› âœ…
   - ì£¼ê°„ ì‹ë‹¨ ìš”ì•½: `weekly_diet_plans`, `weekly_nutrition_stats` ì§€ì› âœ…
   - ìžì£¼ êµ¬ë§¤í•˜ëŠ” ì‹ìžìž¬: `weekly_shopping_lists` ì§€ì› âœ…
   - ë§ˆì¹´ì˜ ìŒì‹ ë™í™”: `royal_recipes_posts` ì§€ì› âœ…

2. **ë ˆê±°ì‹œ ì•„ì¹´ì´ë¸Œ (A-1 ~ A-4)**
   - ëª…ì¸ ì¸í„°ë·°: `legacy_masters`, `legacy_videos` ì§€ì› âœ…
   - ì „ë¬¸ ë¬¸ì„œí™”: `legacy_documents` ì§€ì› âœ…
   - ë¶„ë¥˜ ê²€ìƒ‰: ì¸ë±ìŠ¤ë¡œ ì„±ëŠ¥ ë³´ìž¥ âœ…
   - ëŒ€ì²´ìž¬ë£Œ ì•ˆë‚´: `legacy_replacement_guides` ì§€ì› âœ…

3. **í˜„ëŒ€ ë ˆì‹œí”¼ (B-1 ~ B-3)**
   - ë‹¨ê³„ë³„ ë ˆì‹œí”¼: `recipe_steps` ì§€ì› âœ…
   - ë ˆì‹œí”¼ ì—…ë¡œë“œ: `recipes`, `recipe_ingredients` ì§€ì› âœ…
   - ì»¤ë®¤ë‹ˆí‹° í‰ê°€: `recipe_ratings`, `recipe_reports` ì§€ì› âœ…

4. **ê±´ê°• ë§žì¶¤ ì‹ë‹¨ (C-1 ~ C-18)**
   - ê±´ê°• ì •ë³´ ìž…ë ¥: `user_health_profiles` ì§€ì› âœ…
   - ì‹ë‹¨ ì¶”ì²œ: `diet_plans`, `weekly_diet_plans` ì§€ì› âœ…
   - ê°€ì¡± êµ¬ì„±ì›: `family_members` ì§€ì› âœ…
   - ì•Œë ˆë¥´ê¸° í•„í„°ë§: `allergy_derived_ingredients` ì§€ì› âœ…
   - ì§ˆë³‘ê´€ë¦¬ì²­ ì•Œë¦¼: `kcdc_alerts` ì§€ì› âœ…
   - ì¦ê²¨ì°¾ê¸°: `favorite_meals` ì§€ì› âœ…
   - ë°€í‚¤íŠ¸: `meal_kits`, `meal_kit_products` ì§€ì› âœ…

### âš ï¸ ë¶€ë¶„ì ìœ¼ë¡œ ì§€ì›ë˜ëŠ” ê¸°ëŠ¥

1. **ë ˆì‹œí”¼ ê²€ìƒ‰ ì„±ëŠ¥**
   - í˜„ìž¬: ê¸°ë³¸ ì¸ë±ìŠ¤ë§Œ ì¡´ìž¬
   - ê°œì„ : Full-text search ì¸ë±ìŠ¤ ì¶”ê°€ ê¶Œìž¥

2. **ë ˆì‹œí”¼ í‰ê°€ í†µê³„**
   - í˜„ìž¬: ë·° ì—†ìŒ (ì½”ë“œì—ì„œ ì°¸ì¡°)
   - ê°œì„ : `recipe_rating_stats` ë·° ìƒì„± í•„ìš”

---

## ðŸ”§ ì¦‰ì‹œ ìˆ˜ì • í•„ìš” ì‚¬í•­

### ìš°ì„ ìˆœìœ„ 1: í•„ìˆ˜ ìˆ˜ì •

1. **ë ˆì‹œí”¼ í‰ê°€ í†µê³„ ë·° ìƒì„±**
   - ê²€ìƒ‰ API ìž‘ë™ì„ ìœ„í•´ í•„ìˆ˜
   - ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìƒì„± í•„ìš”

2. **ê°€ì¡± êµ¬ì„±ì› ì¡°íšŒ API ìˆ˜ì •**
   - `include_in_unified_diet` ì»¬ëŸ¼ SELECTì— ì¶”ê°€

### ìš°ì„ ìˆœìœ„ 2: ê¶Œìž¥ ìˆ˜ì •

1. **ê²€ìƒ‰ ì„±ëŠ¥ ìµœì í™”**
   - Full-text search ì¸ë±ìŠ¤ ì¶”ê°€
   - ê²€ìƒ‰ ê¸°ë¡ í…Œì´ë¸” ì¶”ê°€ (ì„ íƒì‚¬í•­)

2. **ë¯¸ë””ì–´ íŒŒì¼ ë©”íƒ€ë°ì´í„° ê´€ë¦¬**
   - `media_files` í…Œì´ë¸” ì¶”ê°€ (ì„ íƒì‚¬í•­)

---

## ðŸ“‹ ì¢…í•© í‰ê°€

### ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ í’ˆì§ˆ ì ìˆ˜

| í•­ëª© | ì ìˆ˜ | ë¹„ê³  |
|------|------|------|
| **PRD ìš”êµ¬ì‚¬í•­ ì¶©ì¡±ë„** | 95/100 | ë ˆì‹œí”¼ í‰ê°€ ë·° ëˆ„ë½ |
| **ì‹¤ì œ ì½”ë“œ í˜¸í™˜ì„±** | 90/100 | ì¼ë¶€ ë·°/í•¨ìˆ˜ ëˆ„ë½ |
| **ì„±ëŠ¥ ìµœì í™”** | 85/100 | ê¸°ë³¸ ì¸ë±ìŠ¤ëŠ” ì¶©ë¶„, ê³ ê¸‰ ìµœì í™” ì—¬ì§€ |
| **ë°ì´í„° ë¬´ê²°ì„±** | 100/100 | ì œì•½ì¡°ê±´ ì™„ë²½ |
| **í™•ìž¥ì„±** | 90/100 | í–¥í›„ ê¸°ëŠ¥ ì¶”ê°€ ìš©ì´ |

**ì¢…í•© ì ìˆ˜: 92/100** â­â­â­â­â­

### ê°•ì 

1. âœ… **ì™„ë²½í•œ ì œì•½ì¡°ê±´ ì„¤ê³„**: CASCADE, UNIQUE, CHECK ê·œì¹™ì´ ì—„ê²©í•˜ê²Œ ì„¤ì •ë¨
2. âœ… **í¬ê´„ì ì¸ ì¸ë±ìŠ¤**: ìžì£¼ ê²€ìƒ‰ë˜ëŠ” ì»¬ëŸ¼ì— ì¸ë±ìŠ¤ê°€ ìž˜ ì„¤ì •ë¨
3. âœ… **ìžë™í™”ëœ íŠ¸ë¦¬ê±°**: updated_at ìžë™ ì—…ë°ì´íŠ¸ë¡œ ë°ì´í„° ì¼ê´€ì„± ë³´ìž¥
4. âœ… **PRD ìš”êµ¬ì‚¬í•­ ì¶©ì¡±**: ê±°ì˜ ëª¨ë“  ê¸°ëŠ¥ì´ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì§€ì›ë¨

### ê°œì„  í•„ìš” ì‚¬í•­

1. âš ï¸ **ë ˆì‹œí”¼ í‰ê°€ í†µê³„ ë·°**: ê²€ìƒ‰ API ìž‘ë™ì„ ìœ„í•´ í•„ìˆ˜
2. âš ï¸ **ê²€ìƒ‰ ì„±ëŠ¥**: Full-text search ê³ ë ¤
3. ðŸ’¡ **í™•ìž¥ì„±**: ê²€ìƒ‰ ê¸°ë¡, ë¯¸ë””ì–´ ë©”íƒ€ë°ì´í„° í…Œì´ë¸” ì¶”ê°€ ê³ ë ¤

---

## ðŸŽ¯ ê¶Œìž¥ ì¡°ì¹˜ ì‚¬í•­

### ì¦‰ì‹œ ì‹¤í–‰ (í•„ìˆ˜)

1. `recipe_rating_stats` ë·° ìƒì„± ë§ˆì´ê·¸ë ˆì´ì…˜ ì¶”ê°€
2. ê°€ì¡± êµ¬ì„±ì› ì¡°íšŒ APIì— `include_in_unified_diet` ì»¬ëŸ¼ ì¶”ê°€

### ë‹¨ê¸° ê°œì„  (1-2ì£¼)

1. Full-text search ì¸ë±ìŠ¤ ì¶”ê°€
2. ê²€ìƒ‰ ê¸°ë¡ í…Œì´ë¸” ì¶”ê°€ (ì„ íƒì‚¬í•­)

### ìž¥ê¸° ê°œì„  (1-2ê°œì›”)

1. ë¯¸ë””ì–´ íŒŒì¼ ë©”íƒ€ë°ì´í„° í…Œì´ë¸” ì¶”ê°€
2. ë ˆì‹œí”¼ ì¹´í…Œê³ ë¦¬ ì‹œìŠ¤í…œ í™•ìž¥ (ì„ íƒì‚¬í•­)

---

## ðŸ“ ê²°ë¡ 

ìƒì„±ëœ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆëŠ” **PRD ìš”êµ¬ì‚¬í•­ê³¼ ì‹¤ì œ ì½”ë“œ êµ¬í˜„ì„ ê±°ì˜ ì™„ë²½í•˜ê²Œ ì§€ì›**í•©ë‹ˆë‹¤. 

**ì£¼ìš” ì„±ê³¼:**
- 47ê°œ í…Œì´ë¸”ë¡œ ëª¨ë“  ê¸°ëŠ¥ ì§€ì›
- 70ê°œ ì¸ë±ìŠ¤ë¡œ ì„±ëŠ¥ ìµœì í™”
- ì—„ê²©í•œ ì œì•½ì¡°ê±´ìœ¼ë¡œ ë°ì´í„° ë¬´ê²°ì„± ë³´ìž¥
- ìžë™í™”ëœ íŠ¸ë¦¬ê±°ë¡œ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

**ê°œì„  í•„ìš”:**
- ë ˆì‹œí”¼ í‰ê°€ í†µê³„ ë·° ì¶”ê°€ (ê²€ìƒ‰ API ìž‘ë™ í•„ìˆ˜)
- ì¼ë¶€ API ì½”ë“œ ìˆ˜ì • (ì»¬ëŸ¼ ì¶”ê°€)

ì „ë°˜ì ìœ¼ë¡œ **ë§¤ìš° ìš°ìˆ˜í•œ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„**ì´ë©°, ì†Œìˆ˜ì˜ ìˆ˜ì •ë§Œìœ¼ë¡œ ì™„ë²½í•˜ê²Œ ìž‘ë™í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

---

**ìž‘ì„±ìž**: AI Assistant  
**ê²€í† ì¼**: 2025ë…„ 1ì›” 1ì¼  
**ë‹¤ìŒ ê²€í†  ì˜ˆì •ì¼**: ìŠ¤í‚¤ë§ˆ ì ìš© í›„



