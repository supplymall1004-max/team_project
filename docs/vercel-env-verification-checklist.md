# Vercel 환경변수 확인 체크리스트

## ✅ 환경변수 문제 해결 확인 방법

환경변수 문제가 해결되었는지 확인하는 단계별 체크리스트입니다.

---

## 1단계: Vercel 환경변수 확인

### Vercel Dashboard에서 확인

1. [Vercel Dashboard](https://vercel.com) 접속
2. 프로젝트 선택 (`team-project-eight-blue`)
3. **Settings** → **Environment Variables** 클릭
4. 다음 변수들이 **모두** 있는지 확인:

#### 필수 변수 (반드시 있어야 함)

- [ ] `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY` - 값이 있음
- [ ] `CLERK_SECRET_KEY` - 값이 있음
- [ ] `NEXT_PUBLIC_SUPABASE_URL` - 값이 있음
- [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY` - 값이 있음
- [ ] `SUPABASE_SERVICE_ROLE_KEY` - 값이 있음

#### 확인 사항

각 변수에 대해:
- [ ] 변수명이 정확함 (대소문자, 언더스코어 정확히)
- [ ] 값이 비어있지 않음
- [ ] 따옴표 없이 입력됨
- [ ] **Production 환경에 적용됨** ⚠️ 가장 중요!

---

## 2단계: 재배포 확인

환경변수를 설정/수정한 후 **반드시 재배포**해야 합니다.

### 재배포 방법

1. Vercel Dashboard → **Deployments** 탭
2. 최신 배포 옆 **"..."** 메뉴 클릭
3. **"Redeploy"** 선택
4. 재배포 완료 대기 (보통 1-2분)

### 재배포 확인

- [ ] 재배포가 완료되었는지 확인
- [ ] 배포 상태가 "Ready"인지 확인
- [ ] 배포 시간이 환경변수 설정 시간 이후인지 확인

---

## 3단계: 브라우저 콘솔 확인

### 콘솔 열기

1. 프로덕션 사이트 접속 (`https://team-project-eight-blue.vercel.app`)
2. 키보드에서 **`F12`** 키 누르기
3. **"Console"** 탭 클릭

### 확인할 내용

#### ✅ 정상인 경우

콘솔에 다음과 같은 메시지가 보이면 정상:
- `✅ [Layout] Clerk 환경 변수 확인 완료` (개발 환경에서만)
- 에러 메시지가 없음
- 페이지가 정상적으로 로드됨

#### ❌ 문제가 있는 경우

다음과 같은 에러가 보이면 문제가 있습니다:

**Clerk 관련 에러:**
```
❌ [Layout] 프로덕션 환경에서 NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY가 설정되지 않았습니다.
```
→ **해결**: Vercel에 `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY` 설정 후 재배포

**Supabase 관련 에러:**
```
[useClerkSupabaseClient] Supabase 환경 변수가 설정되지 않았습니다.
```
→ **해결**: Vercel에 `NEXT_PUBLIC_SUPABASE_URL`, `NEXT_PUBLIC_SUPABASE_ANON_KEY` 설정 후 재배포

**PGRST301 에러:**
```
❌ 사용자 조회 오류: { code: 'PGRST301', message: 'No suitable key or wrong key type' }
```
→ **해결**: Vercel에 `SUPABASE_SERVICE_ROLE_KEY` 설정 (Service Role Key 사용) 후 재배포

---

## 4단계: 페이지 로드 확인

### 정상 작동 확인

- [ ] 홈페이지가 정상적으로 로드됨
- [ ] 에러 메시지가 표시되지 않음
- [ ] 로그인/회원가입 버튼이 보임
- [ ] 네비게이션이 정상 작동함

### 문제가 있는 경우

- [ ] "애플리케이션 오류" 메시지가 계속 표시됨
- [ ] 페이지가 하얗게 표시됨
- [ ] 콘솔에 에러 메시지가 있음

---

## 5단계: 문제 해결

### 문제 1: 환경변수가 설정되어 있는데도 오류 발생

**가능한 원인:**
1. 재배포를 하지 않음
2. Production 환경에 적용되지 않음
3. 변수 값에 따옴표가 포함됨
4. 변수명 오타

**해결 방법:**
1. 환경변수 삭제 후 다시 추가 (따옴표 없이)
2. "Apply to"에서 **Production** 선택 확인
3. 재배포 완료 확인

### 문제 2: 재배포 후에도 오류 발생

**가능한 원인:**
1. 브라우저 캐시 문제
2. 환경변수 값이 잘못됨
3. 다른 코드 레벨 에러

**해결 방법:**
1. 하드 리프레시: `Ctrl + Shift + R` (Windows) 또는 `Cmd + Shift + R` (Mac)
2. 브라우저 쿠키 삭제
3. 브라우저 콘솔의 정확한 에러 메시지 확인

### 문제 3: 특정 기능만 작동하지 않음

**가능한 원인:**
1. 해당 기능에 필요한 환경변수가 누락됨
2. 환경변수 값이 잘못됨

**해결 방법:**
1. 브라우저 콘솔에서 해당 기능 관련 에러 확인
2. 필요한 환경변수 확인 및 설정
3. 재배포

---

## 빠른 확인 방법

### 1분 체크리스트

다음 항목을 빠르게 확인하세요:

1. **Vercel 환경변수**
   - [ ] 필수 5개 변수가 모두 있음
   - [ ] Production 환경에 적용됨

2. **재배포**
   - [ ] 환경변수 설정 후 재배포 완료
   - [ ] 배포 상태가 "Ready"

3. **브라우저 확인**
   - [ ] F12 → Console 탭에서 에러 없음
   - [ ] 페이지가 정상 로드됨

---

## 도움이 필요할 때

위 체크리스트를 모두 확인했는데도 문제가 계속되면:

1. **브라우저 콘솔의 에러 메시지** 복사
2. **Vercel 환경변수 설정 스크린샷** (키 값은 가림)
3. **재배포 완료 여부** 확인

이 정보를 제공해주시면 정확한 해결 방법을 안내해드리겠습니다.
