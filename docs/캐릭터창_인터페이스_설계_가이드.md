# 캐릭터창 인터페이스 설계 가이드

**작성일**: 2025-01-29  
**목적**: 생애주기별 네온 알림 시스템의 캐릭터 아바타 중심 인터페이스 설계 가이드

---

## 1. 개요

생애주기별 네온 알림 시스템은 **게임 HUD 스타일**의 인터페이스를 제공하며, 각 가족 구성원을 **캐릭터 아바타**로 표현하여 직관적인 건강 관리 인터페이스를 제공합니다.

### 핵심 컨셉
- **게임 HUD 스타일**: 퀘스트 목록처럼 보이는 건강 관리 인터페이스
- **캐릭터 아바타 중심**: 각 가족 구성원을 캐릭터로 표현
- **3단계 중요도 시스템**: High(빨간 네온), Medium(노란 네온), Low(푸른 네온)
- **생애주기별 맞춤**: 영유아(0-7세), 청소년(8-19세), 성인(20-64세), 노인(65세+)

---

## 2. 캐릭터 아바타 컴포넌트 설계

### 2.1 컴포넌트 구조

**파일**: `components/health/family-member-avatar.tsx` (생성 필요)

```typescript
interface FamilyMemberAvatarProps {
  member: {
    id: string;
    name: string;
    relationship: string;
    birth_date: string;
    gender: 'male' | 'female' | 'other' | null;
    avatar_url?: string;
    avatar_type?: 'photo' | 'icon';
  };
  size?: 'sm' | 'md' | 'lg' | 'xl';
  showBadge?: boolean; // 건강 상태 배지 표시
  showLevel?: boolean; // 레벨 표시 (게임 스타일)
  className?: string;
}
```

### 2.2 기능 요구사항

**2.2.1 사진 업로드**
- 이미지 파일 업로드 지원 (JPG, PNG, GIF)
- Supabase Storage에 저장
- 최대 파일 크기: 10MB
- 이미지 최적화 (자동 리사이징)

**2.2.2 얼굴 인식 (선택적)**
- 클라이언트 측 라이브러리 또는 서버 API 활용
- 얼굴 영역 자동 크롭
- 얼굴 인식 실패 시 전체 이미지 사용

**2.2.3 아이콘 폴백**
- 사진이 없을 경우 나이/성별 기반 기본 아이콘 표시
- 영유아: 👶 (Baby 아이콘)
- 청소년: 🎓 (GraduationCap 아이콘)
- 성인 남성: 👨 (User 아이콘)
- 성인 여성: 👩 (User 아이콘)
- 노인: 👴/👵 (User 아이콘, 회색 톤)

**2.2.4 원형 프레임**
- `rounded-full` 클래스 사용
- 테두리 색상: 건강 상태에 따라 변경
  - 건강함: 초록색 (`border-green-400`)
  - 주의 필요: 노란색 (`border-yellow-400`)
  - 위험: 빨간색 (`border-red-400`)

### 2.3 게임 스타일 장식 효과

**현재 구현 예시** (`app/health/family/[memberId]/notifications/page.tsx` 참고):

```tsx
<div className="relative">
  <div className="w-20 h-20 rounded-full border-4 border-green-400 shadow-lg bg-gradient-to-br from-green-400 to-green-600 overflow-hidden">
    {familyMember.photo_url ? (
      <Image
        src={familyMember.photo_url}
        alt={familyMember.name}
        fill
        className="object-cover"
        sizes="80px"
      />
    ) : (
      <div className="w-full h-full flex items-center justify-center text-white text-3xl font-bold">
        {familyMember.name?.[0] || <User className="w-10 h-10" />}
      </div>
    )}
  </div>
  {/* 게임 스타일 장식 효과 */}
  <div className="absolute -top-1 -right-1 w-6 h-6 bg-yellow-400 rounded-full border-2 border-white shadow-md flex items-center justify-center">
    <span className="text-xs font-bold text-yellow-900">⭐</span>
  </div>
</div>
```

**장식 효과 옵션**:
- 건강 점수 배지: 건강 점수에 따른 별 개수 표시
- 레벨 표시: 생애주기 단계를 레벨로 표현 (예: "Lv.5 - 성인")
- 상태 아이콘: 최근 알림 상태 표시 (긴급 알림, 완료 등)

---

## 3. 레이아웃 구조

### 3.1 가족 구성원별 알림 페이지

**파일**: `app/(dashboard)/health/family/[memberId]/notifications/page.tsx`

**레이아웃 구조**:

```
┌─────────────────────────────────────────────────────────┐
│  [뒤로가기 버튼]  생애주기별 건강 알림                    │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  ┌──────────────────────────────────────────────────┐  │
│  │  [캐릭터 아바타 - 게임 스타일]                    │  │
│  │  ┌──────────┐                                    │  │
│  │  │  원형    │  이름: 엄마                        │  │
│  │  │  아바타  │  나이: 52세                        │  │
│  │  │  (사진)  │  관계: 어머니                      │  │
│  │  │  ⭐ 배지 │  건강점수: 85점                    │  │
│  │  └──────────┘                                    │  │
│  └──────────────────────────────────────────────────┘  │
│                                                          │
│  🔴 High 우선순위 알림 (3개)                            │
│  ┌──────────────────────────────────────────────────┐  │
│  │  ┌─────┐ ┌─────┐ ┌─────┐                        │  │
│  │  │ 빨강 │ │ 빨강 │ │ 빨강 │                        │  │
│  │  │ 네온 │ │ 네온 │ │ 네온 │                        │  │
│  │  │ 카드 │ │ 카드 │ │ 카드 │                        │  │
│  │  └─────┘ └─────┘ └─────┘                        │  │
│  └──────────────────────────────────────────────────┘  │
│                                                          │
│  🟡 Medium 우선순위 알림 (5개)                          │
│  [노란 네온 카드 그리드...]                              │
│                                                          │
│  🔵 Low 우선순위 알림 (8개)                              │
│  [푸른 네온 카드 그리드...]                              │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

### 3.2 캐릭터 아바타 헤더 컴포넌트

**구현 예시**:

```tsx
<div className="flex items-center gap-4 p-6 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg border-2 border-green-200">
  {/* 캐릭터 아바타 */}
  <div className="relative">
    <div className="w-20 h-20 rounded-full border-4 border-green-400 shadow-lg bg-gradient-to-br from-green-400 to-green-600 overflow-hidden">
      {member.avatar_url ? (
        <Image
          src={member.avatar_url}
          alt={member.name}
          fill
          className="object-cover"
          sizes="80px"
        />
      ) : (
        <div className="w-full h-full flex items-center justify-center text-white text-3xl font-bold">
          {getDefaultIcon(member)}
        </div>
      )}
    </div>
    {/* 건강 점수 배지 */}
    {showBadge && (
      <div className="absolute -top-1 -right-1 w-6 h-6 bg-yellow-400 rounded-full border-2 border-white shadow-md flex items-center justify-center">
        <span className="text-xs font-bold text-yellow-900">
          {getHealthScoreBadge(member.health_score)}
        </span>
      </div>
    )}
  </div>
  
  {/* 캐릭터 정보 */}
  <div className="flex-1">
    <div className="flex items-center gap-2 mb-1">
      <h2 className="text-2xl font-bold">{member.name}</h2>
      <Badge variant="outline">{member.relationship}</Badge>
      {showLevel && (
        <Badge variant="secondary">
          Lv.{calculateLifecycleLevel(member.age)}
        </Badge>
      )}
    </div>
    <p className="text-sm text-gray-600">
      {member.gender === 'male' ? '남성' : member.gender === 'female' ? '여성' : '기타'} • 
      만 {member.age}세 • 
      건강점수: {member.health_score}점
    </p>
  </div>
</div>
```

---

## 4. 스타일링 가이드

### 4.1 네온 효과

**High 우선순위 (빨간 네온)**:
```css
border-red-500
shadow-red-500/50
bg-red-50
box-shadow: 0 0 20px rgba(239, 68, 68, 0.5)
```

**Medium 우선순위 (노란 네온)**:
```css
border-yellow-500
shadow-yellow-500/50
bg-yellow-50
box-shadow: 0 0 20px rgba(234, 179, 8, 0.5)
```

**Low 우선순위 (푸른 네온)**:
```css
border-blue-500
shadow-blue-500/50
bg-blue-50
box-shadow: 0 0 20px rgba(59, 130, 246, 0.5)
```

### 4.2 캐릭터 아바타 스타일

**기본 스타일**:
```tsx
className="w-20 h-20 rounded-full border-4 border-green-400 shadow-lg bg-gradient-to-br from-green-400 to-green-600 overflow-hidden"
```

**크기 변형**:
- `sm`: `w-12 h-12` (48px)
- `md`: `w-16 h-16` (64px)
- `lg`: `w-20 h-20` (80px)
- `xl`: `w-24 h-24` (96px)

**건강 상태별 테두리 색상**:
- 건강함 (80점 이상): `border-green-400`
- 양호 (60-79점): `border-blue-400`
- 주의 (40-59점): `border-yellow-400`
- 위험 (40점 미만): `border-red-400`

### 4.3 게임 스타일 장식

**배지 스타일**:
```tsx
<div className="absolute -top-1 -right-1 w-6 h-6 bg-yellow-400 rounded-full border-2 border-white shadow-md flex items-center justify-center">
  <span className="text-xs font-bold text-yellow-900">⭐</span>
</div>
```

**레벨 표시**:
```tsx
<Badge variant="secondary" className="ml-2">
  Lv.{level} - {lifecycleStage}
</Badge>
```

---

## 5. 인터랙션 디자인

### 5.1 호버 효과

**캐릭터 아바타 호버**:
```css
transition: all 0.3s ease;
transform: scale(1.05);
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
```

**알림 카드 호버**:
```css
transform: translateY(-8px);
box-shadow: 0 20px 40px rgba(0,0,0,0.1);
```

### 5.2 클릭 피드백

**알림 카드 클릭**:
- 클릭 시 상세 정보 모달 표시
- "완료" 버튼 클릭 시 "팡!" 효과 (scale + fade out)
- "나중에" 버튼 클릭 시 24시간 후 재표시

### 5.3 애니메이션

**새 알림 등장**:
```css
@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
```

**알림 완료 애니메이션**:
```css
@keyframes popOut {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(0);
    opacity: 0;
  }
}
```

---

## 6. 반응형 디자인

### 6.1 모바일 (320px ~ 767px)

- 캐릭터 아바타: `w-16 h-16` (64px)
- 알림 카드: 1열 (세로 스크롤)
- 캐릭터 정보: 세로 배치

### 6.2 태블릿 (768px ~ 1023px)

- 캐릭터 아바타: `w-20 h-20` (80px)
- 알림 카드: 2열 그리드
- 캐릭터 정보: 가로 배치

### 6.3 데스크톱 (1024px 이상)

- 캐릭터 아바타: `w-24 h-24` (96px)
- 알림 카드: 3열 그리드
- 캐릭터 정보: 가로 배치, 추가 정보 표시

---

## 7. 구현 파일 목록

### 7.1 컴포넌트

- [ ] `components/health/family-member-avatar.tsx` - 캐릭터 아바타 컴포넌트
- [ ] `components/health/lifecycle-notification-card.tsx` - 알림 카드 컴포넌트
- [ ] `components/health/notification-grid.tsx` - 알림 그리드 레이아웃
- [ ] `components/health/family-notifications-dashboard.tsx` - 가족 통합 대시보드

### 7.2 페이지

- [ ] `app/(dashboard)/health/family/[memberId]/notifications/page.tsx` - 가족 구성원별 알림 페이지
- [ ] `app/(dashboard)/health/family/notifications/page.tsx` - 가족 통합 알림 대시보드

### 7.3 유틸리티

- [ ] `lib/health/avatar-utils.ts` - 아바타 관련 유틸리티 함수
  - `getDefaultIcon()` - 기본 아이콘 반환
  - `getHealthScoreBadge()` - 건강 점수 배지 반환
  - `calculateLifecycleLevel()` - 생애주기 레벨 계산

---

## 8. 참고 구현 예시

### 8.1 현재 구현된 예시

**파일**: `app/health/family/[memberId]/notifications/page.tsx`

```tsx
{/* 프로필 사진 - 게임 캐릭터 아바타 스타일 */}
<div className="relative">
  <div className="w-20 h-20 rounded-full border-4 border-green-400 shadow-lg bg-gradient-to-br from-green-400 to-green-600 overflow-hidden">
    {familyMember.photo_url ? (
      <Image
        src={familyMember.photo_url}
        alt={familyMember.name}
        fill
        className="object-cover"
        sizes="80px"
      />
    ) : (
      <div className="w-full h-full flex items-center justify-center text-white text-3xl font-bold">
        {familyMember.name?.[0] || <User className="w-10 h-10" />}
      </div>
    )}
  </div>
  {/* 게임 스타일 장식 효과 */}
  <div className="absolute -top-1 -right-1 w-6 h-6 bg-yellow-400 rounded-full border-2 border-white shadow-md flex items-center justify-center">
    <span className="text-xs font-bold text-yellow-900">⭐</span>
  </div>
</div>
```

### 8.2 Avatar 컴포넌트 활용

**기존 Avatar 컴포넌트**: `components/ui/avatar.tsx`

```tsx
<Avatar className="h-16 w-16">
  <AvatarImage src={member.avatar_url} />
  <AvatarFallback className="text-lg">
    {member.name.charAt(0)}
  </AvatarFallback>
</Avatar>
```

---

## 9. 디자인 원칙

### 9.1 게임 HUD 스타일

- **퀘스트 목록 느낌**: 알림 카드를 퀘스트 카드처럼 표현
- **레벨 시스템**: 생애주기 단계를 레벨로 표현
- **배지 시스템**: 건강 점수, 완료율 등을 배지로 표시
- **네온 효과**: 중요도에 따른 네온 효과로 시각적 구분

### 9.2 캐릭터 중심 인터페이스

- **캐릭터 아바타가 중심**: 각 페이지 상단에 캐릭터 아바타 배치
- **캐릭터별 맞춤 정보**: 각 캐릭터(가족 구성원)별로 맞춤 알림 제공
- **캐릭터 상태 표시**: 건강 점수, 최근 알림 상태 등을 아바타 주변에 표시

### 9.3 직관적인 건강 관리

- **한눈에 파악**: 우선순위별로 색상 구분
- **즉시 액션**: 알림 카드에서 바로 완료/해제 가능
- **시각적 피드백**: 완료 시 애니메이션으로 만족감 제공

---

## 10. 참고 문서

- `docs/01_UI_UX.md` - UI/UX 디자인 패턴 분석
- `docs/02.md` - 시각적 디자인 요소 분석
- `docs/03.md` - 사이트 종류별 디자인 패턴 분류
- `docs/04.md` - 구현 예제 및 코드
- `생애주기별_네온_알림_시스템_구현_56b61b52.plan.md` - 생애주기별 네온 알림 시스템 계획서

---

**문서 작성 완료**


